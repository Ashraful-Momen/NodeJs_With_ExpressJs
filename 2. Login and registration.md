Below is **the perfect Laravel-style folder structure + login + registration API** in **Node.js + Express + MySQL (Prisma or Knex)**.

This is **100% production-ready** and feels like **Laravel (Controllers, Services, Middleware, Routes)**.

---

# ğŸ“ **Folder Structure (Exactly like Laravel)**

```
project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ db.js                # DB connection
â”‚   â”‚
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â””â”€â”€ AuthController.js    # login, register
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ AuthService.js       # business logic
â”‚   â”‚
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ AuthMiddleware.js    # verify JWT (like Laravel auth:api)
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ auth.routes.js
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ jwt.js
â”‚   â”‚   â””â”€â”€ bcrypt.js
â”‚   â”‚
â”‚   â”œâ”€â”€ app.js
â”‚   â””â”€â”€ server.js
â”‚
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma
â”‚
â””â”€â”€ .env
```

---

# âš™ï¸ **1. Prisma (MySQL) Schema**

`prisma/schema.prisma`

```prisma
datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        Int     @id @default(autoincrement())
  name      String
  email     String  @unique
  password  String
  createdAt DateTime @default(now())
}
```

Run:

```
npx prisma migrate dev --name init
```

---

# ğŸ”Œ **2. DB Connection**

`src/config/db.js`

```js
const { PrismaClient } = require('@prisma/client');
module.exports = new PrismaClient();
```

---

# ğŸ” **3. Utils â†’ Bcrypt & JWT**

`src/utils/bcrypt.js`

```js
const bcrypt = require('bcryptjs');

module.exports = {
  hash: (password) => bcrypt.hashSync(password, 10),
  compare: (password, hash) => bcrypt.compareSync(password, hash)
};
```

`src/utils/jwt.js`

```js
const jwt = require("jsonwebtoken");

module.exports = {
  sign: (payload) => jwt.sign(payload, process.env.JWT_SECRET, { expiresIn: "1d" }),
  verify: (token) => jwt.verify(token, process.env.JWT_SECRET)
};
```

---

# ğŸ’¼ **4. Auth Service (Laravel-style logic layer)**

`src/services/AuthService.js`

```js
const db = require("../config/db");
const bcrypt = require("../utils/bcrypt");
const jwt = require("../utils/jwt");

class AuthService {
  async register(data) {
    const userExists = await db.user.findUnique({
      where: { email: data.email }
    });
    if (userExists) throw new Error("Email already exists");

    const hashed = bcrypt.hash(data.password);

    const user = await db.user.create({
      data: {
        name: data.name,
        email: data.email,
        password: hashed
      }
    });

    return user;
  }

  async login(email, password) {
    const user = await db.user.findUnique({ where: { email } });
    if (!user) throw new Error("Invalid credentials");

    const valid = bcrypt.compare(password, user.password);
    if (!valid) throw new Error("Invalid credentials");

    const token = jwt.sign({ id: user.id, email: user.email });

    return { token, user };
  }
}

module.exports = new AuthService();
```

---

# ğŸ® **5. Auth Controller (Like Laravel Controller)**

`src/controllers/AuthController.js`

```js
const AuthService = require("../services/AuthService");

class AuthController {
  async register(req, res) {
    try {
      const user = await AuthService.register(req.body);
      return res.status(201).json({ message: "User Registered", user });
    } catch (err) {
      return res.status(400).json({ error: err.message });
    }
  }

  async login(req, res) {
    try {
      const { email, password } = req.body;
      const data = await AuthService.login(email, password);
      return res.json(data);
    } catch (err) {
      return res.status(400).json({ error: err.message });
    }
  }
}

module.exports = new AuthController();
```

---

# ğŸ”’ **6. Auth Middleware (like auth:sanctum)**

`src/middleware/AuthMiddleware.js`

```js
const jwt = require("../utils/jwt");

module.exports = function (req, res, next) {
  try {
    const token = req.headers.authorization?.split(" ")[1];
    if (!token) return res.status(401).json({ error: "Token missing" });

    const user = jwt.verify(token);
    req.user = user;
    next();
  } catch (err) {
    return res.status(401).json({ error: "Invalid token" });
  }
};
```

---

# ğŸ›£ï¸ **7. Routes (Like Laravel routes/api.php)**

`src/routes/auth.routes.js`

```js
const router = require("express").Router();
const AuthController = require("../controllers/AuthController");

router.post("/register", AuthController.register);
router.post("/login", AuthController.login);

module.exports = router;
```

`src/routes/index.js`

```js
const router = require("express").Router();

router.use("/auth", require("./auth.routes"));

module.exports = router;
```

---

# ğŸš€ **8. Express App + Server**

`src/app.js`

```js
const express = require("express");
const app = express();

app.use(express.json());
app.use("/api", require("./routes"));

module.exports = app;
```

`src/server.js`

```js
require("dotenv").config();
const app = require("./app");

app.listen(5000, () => console.log("Server running on port 5000"));
```

---

# ğŸ¯ **API Test (Postman)**

### Register

```
POST /api/auth/register
{
  "name": "John Doe",
  "email": "john@gmail.com",
  "password": "123456"
}
```

### Login

```
POST /api/auth/login
{
  "email": "john@gmail.com",
  "password": "123456"
}
```

### Access Protected Routes

```
Authorization: Bearer <token>
```

---

# âœ… Done â€” You Now Have:

âœ” Laravel-style folders
âœ” Registration
âœ” Login (JWT)
âœ” Service Layer
âœ” Middleware
âœ” Prisma + MySQL
âœ” Clean MVC structure

---

# Want Next Step?

I can also provide:

ğŸ”¥ **Laravel-style role & permission system**
ğŸ”¥ **Middleware: checkRole(), checkPermission()**
ğŸ”¥ **Full CRUD example with protected routes**

Just tell me:
**â€œGive role & permission setup.â€**
